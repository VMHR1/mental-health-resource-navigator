<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Texas Youth Mental Health Resource Finder</title>
  <meta name="description" content="A neutral directory of adolescent and youth mental health programs across the Dallas-Fort Worth Metroplex. Filter by level of care, location, and needs." />
  <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline' 'unsafe-eval'; style-src 'self' 'unsafe-inline'; img-src 'self' data: https:; connect-src 'self' http://127.0.0.1:7242 https://api.github.com https://formspree.io; font-src 'self' data:; frame-ancestors 'none'; base-uri 'self'; form-action 'self' https://formspree.io;">
  <meta http-equiv="X-Content-Type-Options" content="nosniff">
  <meta http-equiv="X-Frame-Options" content="DENY">
  <meta http-equiv="Referrer-Policy" content="strict-origin-when-cross-origin">
  <meta http-equiv="Permissions-Policy" content="geolocation=(), microphone=(), camera=()">
  <link rel="stylesheet" href="styles.css">
  <script src="security.js"></script>
  
</head>

<body>
  <a href="#treatmentSection" class="skip-link">Skip to search results</a>
  <div class="bg-gradient" aria-hidden="true"></div>

  <div class="crisis-banner" role="region" aria-label="Crisis information">
    <div class="inner">
      If someone is in immediate physical danger, call 911.
      <a href="tel:988">988 Lifeline</a>
      <a href="https://www.samhsa.gov/find-help/988" target="_blank" rel="noopener">What is 988?</a>
    </div>
  </div>

  <div class="container">
    <header>
      <div class="header-content">
        <div class="brand">
          <div class="mark" aria-hidden="true"></div>
          <div>
            <p class="kicker">Texas Youth Mental Health</p>
            <p class="title">Resource Finder</p>
          </div>
        </div>

        <div class="header-actions">
     <div class="pill" title="Neutral directory principles">
            <span class="dot" aria-hidden="true"></span>
            <span>Informational ‚Ä¢ Not ranked ‚Ä¢ Verify details</span>
          </div>
          <a class="btnlike btn-primary" href="submit.html" aria-label="Submit a program for review">Submit a program</a>
        </div>
      </div>

      <!-- Triage Split -->
      <div class="triage-split">
        <div class="triage-grid">
          <div class="triage-card emergency">
            <div class="triage-icon">üö®</div>
            <h2>Mental Health Crisis Support (988)</h2>
            <p>Suicidal thoughts, emotional distress, or mental health crisis - when there is no immediate physical danger</p>
            <a href="tel:988" class="btn-emergency">Call 988 Now</a>
            <button class="btn-secondary" id="viewCrisisResources">View All Crisis Resources</button>
          </div>
          
          <div class="triage-card planning">
            <div class="triage-icon">üóìÔ∏è</div>
            <h2>Ongoing Care & Treatment</h2>
            <p>Looking for ongoing treatment, assessments, or therapy</p>
            <button class="btn-primary btn-secondary" id="viewTreatmentOptions">Find Treatment Programs</button>
          </div>
        </div>
      </div>

      <!-- Trust Strip -->
      <div class="trust-strip">
        <div class="trust-grid">
          <div class="trust-item">
            <div class="trust-icon">‚úì</div>
            <div class="trust-text">
              <strong><span id="programCount">150+</span> Programs</strong>
              <span>Verified monthly</span>
            </div>
          </div>
          <div class="trust-item">
            <div class="trust-icon">üîí</div>
            <div class="trust-text">
              <strong>Privacy First</strong>
              <span>No tracking, no data collection</span>
            </div>
          </div>
          <div class="trust-item">
            <div class="trust-icon">‚öñÔ∏è</div>
            <div class="trust-text">
              <strong>100% Neutral</strong>
              <span>No paid placements or rankings</span>
            </div>
          </div>
          <div class="trust-item">
            <div class="trust-icon">üìû</div>
            <div class="trust-text">
              <strong>Direct Contact</strong>
              <span>Call programs directly, not us</span>
            </div>
          </div>
        </div>
      </div>

      <div class="hero">
        <div class="hero-copy">
          <h1>Find the right level of support‚Äîclearly, calmly, and without judgment.</h1>
          <p class="sub">
            Search programs by level of care (PHP, IOP, outpatient) and location. Crisis resources are kept separate by default for clarity.
          </p>

          <div class="hero-bullets">
            <label class="chip" title="Show crisis services (hotlines, mobile crisis, walk-in urgent care)">
              <input id="showCrisisTop" type="checkbox" />
              <span>Show crisis resources</span>
            </label>

            <label class="chip" title="Show virtual/telehealth offerings when noted">
              <input id="onlyVirtualTop" type="checkbox" />
              <span>Virtual only</span>
            </label>
          </div>

          <div id="loadWarn" class="warnBox" role="status" aria-live="polite"></div>
        </div>

        <div class="hero-visual" aria-label="Summary cards">
          <div class="floating-card">
            <strong>Level of care</strong>
            <span>PHP ‚Ä¢ IOP ‚Ä¢ Outpatient ‚Ä¢ Navigation</span>
          </div>
          <div class="floating-card">
            <strong>Family-friendly filters</strong>
            <span>Location, virtual, crisis toggle</span>
          </div>
          <div class="floating-card">
            <strong>Accuracy cue</strong>
            <span>Verification source + last verified date (when provided)</span>
          </div>
        </div>
      </div>
    </header>

    <section class="search-section" aria-label="Search and filters">
      <div class="search-header">
        <h3>Search programs across the Dallas-Fort Worth Metroplex</h3>
        <p>Neutral directory view. No endorsements. Always confirm details directly with the program.</p>
      </div>

      <!-- Smart Search -->
      <div class="search-simple">
        <div class="input-group-primary">
          <label for="q">What are you looking for?</label>
          <div class="input-wrapper">
            <span class="input-icon" aria-hidden="true">üîç</span>
            <input id="q" type="search" placeholder="Try: 'IOP in Plano for 14-year-old' or 'crisis support'" autocomplete="off" />
          </div>
        </div>
        
        <button class="btn-smart-search" type="button" id="smartSearchBtn">
          Find Programs ‚Üí
        </button>
        
        <button class="btn-advanced" id="showAdvanced" type="button">
          <span class="icon">‚öôÔ∏è</span>
          <span>Advanced Filters</span>
        </button>
      </div>

      <!-- Advanced Filters -->
      <div class="search-advanced" id="advancedFilters" style="display:none">
        <div class="search-grid">
          <div class="input-group">
            <label for="loc">Location</label>
            <select id="loc">
              <option value="">Any</option>
            </select>
          </div>

          <div class="input-group">
            <label class="dd-label">Age</label>
            <div class="dropdown" data-dd="age">
              <button type="button" class="dd-btn" id="ageBtn" aria-haspopup="listbox" aria-controls="ageMenu" aria-expanded="false">
                <span class="dd-value" id="ageBtnValue">Any age</span>
                <span class="dd-icon" aria-hidden="true">‚ñæ</span>
              </button>

              <div class="dd-menu" id="ageMenu" role="listbox" tabindex="-1" aria-labelledby="ageBtn">
                <div class="dd-option is-selected" role="option" aria-selected="true" data-value="">Any age<span class="dd-check" aria-hidden="true">‚úì</span></div>
                <div class="dd-option" role="option" aria-selected="false" data-value="0">0<span class="dd-check" aria-hidden="true">‚úì</span></div>
                <div class="dd-option" role="option" aria-selected="false" data-value="1">1<span class="dd-check" aria-hidden="true">‚úì</span></div>
                <div class="dd-option" role="option" aria-selected="false" data-value="2">2<span class="dd-check" aria-hidden="true">‚úì</span></div>
                <div class="dd-option" role="option" aria-selected="false" data-value="3">3<span class="dd-check" aria-hidden="true">‚úì</span></div>
                <div class="dd-option" role="option" aria-selected="false" data-value="4">4<span class="dd-check" aria-hidden="true">‚úì</span></div>
                <div class="dd-option" role="option" aria-selected="false" data-value="5">5<span class="dd-check" aria-hidden="true">‚úì</span></div>
                <div class="dd-option" role="option" aria-selected="false" data-value="6">6<span class="dd-check" aria-hidden="true">‚úì</span></div>
                <div class="dd-option" role="option" aria-selected="false" data-value="7">7<span class="dd-check" aria-hidden="true">‚úì</span></div>
                <div class="dd-option" role="option" aria-selected="false" data-value="8">8<span class="dd-check" aria-hidden="true">‚úì</span></div>
                <div class="dd-option" role="option" aria-selected="false" data-value="9">9<span class="dd-check" aria-hidden="true">‚úì</span></div>
                <div class="dd-option" role="option" aria-selected="false" data-value="10">10<span class="dd-check" aria-hidden="true">‚úì</span></div>
                <div class="dd-option" role="option" aria-selected="false" data-value="11">11<span class="dd-check" aria-hidden="true">‚úì</span></div>
                <div class="dd-option" role="option" aria-selected="false" data-value="12">12<span class="dd-check" aria-hidden="true">‚úì</span></div>
                <div class="dd-option" role="option" aria-selected="false" data-value="13">13<span class="dd-check" aria-hidden="true">‚úì</span></div>
                <div class="dd-option" role="option" aria-selected="false" data-value="14">14<span class="dd-check" aria-hidden="true">‚úì</span></div>
                <div class="dd-option" role="option" aria-selected="false" data-value="15">15<span class="dd-check" aria-hidden="true">‚úì</span></div>
                <div class="dd-option" role="option" aria-selected="false" data-value="16">16<span class="dd-check" aria-hidden="true">‚úì</span></div>
                <div class="dd-option" role="option" aria-selected="false" data-value="17">17<span class="dd-check" aria-hidden="true">‚úì</span></div>
              </div>

              <select id="age" class="dd-native" aria-hidden="true" tabindex="-1">
                <option value="">Any age</option>
                <option value="0">0</option>
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5</option>
                <option value="6">6</option>
                <option value="7">7</option>
                <option value="8">8</option>
                <option value="9">9</option>
                <option value="10">10</option>
                <option value="11">11</option>
                <option value="12">12</option>
                <option value="13">13</option>
                <option value="14">14</option>
                <option value="15">15</option>
                <option value="16">16</option>
                <option value="17">17</option>
              </select>
            </div>
          </div>

          <div class="input-group">
            <label for="care">Level of care</label>
            <select id="care">
              <option value="">Any</option>
              <option value="Partial Hospitalization (PHP)">Partial Hospitalization (PHP)</option>
              <option value="Intensive Outpatient (IOP)">Intensive Outpatient (IOP)</option>
              <option value="Navigation">Navigation</option>
            </select>
          </div>

          <div class="input-group">
            <label for="insurance">Insurance</label>
            <select id="insurance">
              <option value="">Any insurance</option>
            </select>
          </div>
        </div>

        <div class="search-actions">
          <div class="toggles">
            <label class="toggle-chip">
              <input id="showCrisis" type="checkbox" />
              <span>Show crisis resources</span>
            </label>

            <label class="toggle-chip">
              <input id="onlyVirtual" type="checkbox" />
              <span>Virtual only</span>
            </label>
          </div>

          <div class="btns">
            <button id="reset" type="button">Reset</button>
            <button class="btn-primary" id="viewAll" type="button">View all</button>
          </div>
        </div>
      </div>

      <div class="recent-searches" style="display:none;"></div>
    </section>

    <div class="results-header" aria-label="Results summary">
      <div class="results-info">
        <div class="results-count" id="totalCount">0</div>
        <div class="results-label" id="resultsLabel">matches</div>
      </div>
      <div class="results-actions">
        <div class="sort-group">
          <label for="sortSelect" class="sr-only">Sort by</label>
          <select id="sortSelect" class="sort-select" aria-label="Sort results">
            <option value="relevance">Sort by relevance</option>
            <option value="name">Sort by name</option>
            <option value="verified">Recently verified</option>
            <option value="location">Location</option>
          </select>
        </div>
        <button type="button" class="btn-icon" id="viewFavorites" title="View saved programs" aria-label="View saved programs">
          <span class="icon">‚≠ê</span>
          <span class="btn-text">Saved</span>
          <span class="badge-count" id="favoritesCount">0</span>
        </button>
        <button type="button" class="btn-icon" id="viewHistory" title="View call history" aria-label="View call history">
          <span class="icon">üìû</span>
          <span class="btn-text">History</span>
        </button>
        <button type="button" class="btn-icon" id="viewComparison" title="Compare selected programs" aria-label="Compare programs">
          <span class="icon">‚öñÔ∏è</span>
          <span class="btn-text">Compare</span>
          <span class="badge-count" id="comparisonCount">0</span>
        </button>
      </div>
    </div>

    <section class="section" id="treatmentSection">
      <div class="sectionHead">
        <h2 id="sectionTitle">Treatment Programs</h2>
        <div class="count" id="treatmentCount">0 results</div>
      </div>
      <div class="grid" id="treatmentGrid" aria-live="polite"></div>
      <div class="empty-state" id="treatmentEmpty" style="display:none;">
        <div class="empty-icon">üîç</div>
        <h3>No programs match these filters</h3>
        <p>Try these search strategies:</p>
        <ul class="empty-tips">
          <li><strong>Broaden your search:</strong> Remove age or location filters</li>
          <li><strong>Try nearby cities:</strong> Many programs serve multiple areas</li>
          <li><strong>Check virtual options:</strong> Telehealth expands access significantly</li>
          <li><strong>Consider similar levels:</strong> IOP and PHP often have similar goals</li>
          <li><strong>Clear all filters:</strong> Start fresh and browse all available programs</li>
        </ul>
        <div class="empty-actions">
          <button data-action="clear-filters" class="btn-primary">
            Clear Location & Age
          </button>
          <button data-action="show-virtual" class="btn-primary">
            Show Virtual Programs
          </button>
          <button data-action="view-all" class="btn-primary">
            View All Programs
          </button>
        </div>
      </div>
    </section>

    <footer>
      This directory is informational and does not provide clinical advice. If you or someone is in immediate danger, call 911.
    </footer>
  </div>

  <!-- Favorites Modal -->
  <div id="favoritesModal" class="modal" role="dialog" aria-labelledby="favoritesModalTitle" aria-hidden="true">
    <div class="modal-content">
      <div class="modal-header">
        <h2 id="favoritesModalTitle">Saved Programs</h2>
        <button type="button" class="modal-close" aria-label="Close modal">&times;</button>
      </div>
      <div class="modal-body" id="favoritesList"></div>
    </div>
  </div>

  <!-- Call History Modal -->
  <div id="historyModal" class="modal" role="dialog" aria-labelledby="historyModalTitle" aria-hidden="true">
    <div class="modal-content">
      <div class="modal-header">
        <h2 id="historyModalTitle">Call History</h2>
        <button type="button" class="modal-close" aria-label="Close modal">&times;</button>
      </div>
      <div class="modal-body" id="historyList"></div>
    </div>
  </div>

  <!-- Comparison Modal -->
  <div id="comparisonModal" class="modal" role="dialog" aria-labelledby="comparisonModalTitle" aria-hidden="true">
    <div class="modal-content comparison-modal-content">
      <div class="modal-header">
        <h2 id="comparisonModalTitle">Compare Programs</h2>
        <div style="display: flex; gap: 10px; align-items: center;">
          <button type="button" id="clearComparison" class="btn-ghost" style="font-size: 12px; padding: 6px 12px;">Clear all</button>
          <button type="button" class="modal-close" aria-label="Close modal">&times;</button>
        </div>
      </div>
      <div class="modal-body" id="comparisonList"></div>
    </div>
  </div>

  <!-- Toast Notification -->
  <div id="toast" class="toast" role="status" aria-live="polite" aria-atomic="true"></div>

  <script src="app.js?v=2"></script>
</body>
</html>
